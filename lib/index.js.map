{"version":3,"file":"index.js","sources":["../src/resizer.js","../src/utils/getPrefix.js","../src/utils/domFns.js","../src/index.js"],"sourcesContent":["/* @flow */\n\nimport * as React from 'react';\n\nconst styles = {\n  base: {\n    position: 'absolute',\n  },\n  top: {\n    width: '100%',\n    height: '10px',\n    top: '-5px',\n    left: '0px',\n    cursor: 'row-resize',\n  },\n  right: {\n    width: '10px',\n    height: '100%',\n    top: '0px',\n    right: '-5px',\n    cursor: 'col-resize',\n  },\n  bottom: {\n    width: '100%',\n    height: '10px',\n    bottom: '-5px',\n    left: '0px',\n    cursor: 'row-resize',\n  },\n  left: {\n    width: '10px',\n    height: '100%',\n    top: '0px',\n    left: '-5px',\n    cursor: 'col-resize',\n  },\n\n  topRight: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    right: '-10px',\n    top: '-10px',\n    cursor: 'ne-resize',\n  },\n  bottomRight: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    right: '-10px',\n    bottom: '-10px',\n    cursor: 'se-resize',\n  },\n  bottomLeft: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    left: '-10px',\n    bottom: '-10px',\n    cursor: 'sw-resize',\n  },\n  topLeft: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    left: '-10px',\n    top: '-10px',\n    cursor: 'nw-resize',\n  },\n  topCenter: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    left: '50%',\n    top: '-10px',\n    marginLeft: '-10px',\n    cursor: 'row-resize',\n  },\n  rightCenter: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    top: '50%',\n    right: '-10px',\n    marginTop: '-10px',\n    cursor: 'col-resize',\n  },\n  bottomCenter: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    left: '50%',\n    bottom: '-10px',\n    marginLeft: '-10px',\n    cursor: 'row-resize',\n  },\n  leftCenter: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    top: '50%',\n    left: '-10px',\n    marginTop: '-10px',\n    cursor: 'col-resize',\n  },\n  rotate: {\n    width: '20px',\n    height: '20px',\n    position: 'absolute',\n    left: '50%',\n    top: '-30px',\n    marginLeft: '-10px',\n    cursor: 'url(data:image/png;base64,AAABAAEAFBQAAAEAIAC4BgAAFgAAACgAAAAUAAAAKAAAAAEAIAAAAAAAQAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGZmZgRmZmYmZmZmdGZmZqlmZmbJZmZmzWZmZrFmZmZ+ZmZmLGZmZgYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmYcaWlp/319ff+srKz/y8vL/97e3v/h4eH/0NDQ/7Kysv+BgYH/ampq/2ZmZioAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmZmWHd3d/+1tbX/9vb2//////////////////////////////////r6+v++vr7/fHx8/2ZmZmwAAAAAAAAAAAAAAAAAAAAAAAAAAGZmZmKBgYH/2tra////////////7Ozs/9PT0/++vr7/u7u7/8fHx//i4uL////////////m5ub/jY2N/2ZmZnwAAAAAAAAAAAAAAABmZmY6eXl5/+Dg4P///////////8rKyv+IiIj/ZmZmtWZmZpNmZmaNZmZmo3V1df+vr6//8fHx///////v7+//iIiI/2ZmZmgAAAAAZmZmBGlpaf/IyMj///////39/f+2trb/a2tr/2ZmZjwAAAAAAAAAAAAAAAAAAAAAZmZmGGZmZn6Ojo7/7u7u///////k5OT/cnJy/wAAAABmZmY8i4uL///////9/f3/zMzM/2lpaf9mZmYcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGZmZnqgoKD/+fn5/9ra2v9tbW3/AAAAAGZmZpnCwsL///////Hx8f+CgoL/ZmZmQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmZmBGhoaP/BwcH/dHR0/7Kysp8AAAAAZmZm1ebm5v//////1tbW/2ZmZrsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG1tbf+/v7+dAAAAAAAAAABmZmbl7+/v//39/f++vr7/ZmZmkwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmZmCGZmZuPu7u7//f39/7u7u/9mZmaPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmZm0+Xl5f//////0NDQ/2ZmZrEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmabwsLC///////r6+v/dXV1/2ZmZiYAAAAAAAAAAAAAAAAAAAAAAAAAAGZmZiJ7e3v/aGho/2hoaP9oaGj/aGho/2hoaP9oaGj/AAAAAGZmZjyKior//v7+//v7+/+8vLz/ZmZmkQAAAAAAAAAAAAAAAAAAAAAAAAAAZmZmJHx8fP///////////////////////////2ZmZv8AAAAAZmZmBGhoaP/Jycn///////j4+P+jo6P/ZmZmi2ZmZh4AAAAAAAAAAAAAAAAAAAAAAAAAAHR0dP/j4+P/////////////////ZmZm/wAAAAAAAAAAZmZmPHp6ev/i4uL///////j4+P+4uLj/dXV1/2ZmZptmZmZ6ZmZmeGZmZpdxcXH/qamp//z8/P////////////////9mZmb/AAAAAAAAAAAAAAAAZmZmZoKCgv/e3t7////////////h4eH/w8PD/7CwsP+vr6//wMDA/97e3v/+/v7///////7+/v///////////2ZmZv8AAAAAAAAAAAAAAAAAAAAAZmZmXnl5ef+2trb/9fX1/////////////v7+//39/f/////////////////a2tr/k5OT/3V1df/T09P/ZmZmtwAAAAAAAAAAAAAAAAAAAAAAAAAAZmZmHmlpaf98fHz/r6+v/9TU1P/k5OT/5ubm/9zc3P/BwcH/jo6O/25ubv8AAAAAAAAAAG1tbf9mZmZMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmZmBGZmZiRmZmZ6ZmZmuWZmZtNmZmbVZmZmxWZmZpdmZmZCZmZmDAAAAAAAAAAAZmZmDAAAAAAAAAAA/w/wAPgB8ADwAPAA4ABwAMAAMACB/BAAg/4QAAf+EAAH/zAAB//wAAf/8AAH//AAB/AQAIPwEACB+BAAwGAQAOAAEADwABAA+AGwAP8H8AA=) 10 10,default',\n  },\n  rotateLine: {\n    position: 'absolute',\n    width: '2px',\n    height: '23px',\n    top: '7px',\n    left: '50%',\n    marginLeft: '-1px',\n    backgroundColor: '#4cae4c',\n    zIndex: -1,\n  }\n};\n\nexport type Direction = 'top' | 'topCenter' | 'right' | 'rightCenter' | 'bottom' | 'bottomCenter' | 'left' | 'leftCenter' | 'topRight' | 'bottomRight' | 'bottomLeft' | 'topLeft' | 'rotate';\n\nexport type OnStartCallback = (\n  e: SyntheticMouseEvent<HTMLDivElement> | SyntheticTouchEvent<HTMLDivElement>,\n  dir: Direction,\n) => void;\n\nexport type Props = {\n  direction: Direction;\n  className?: string;\n  replaceStyles?: { [key: string]: string | number };\n  replaceRotateLineStyles?: { [key: string]: string | number };\n  onResizeStart: OnStartCallback;\n}\n\nexport default (props: Props): React.Element<'div'> => {\n  const direction = props.direction;\n  let children = null;\n  if (direction === 'rotate') {\n    children = (<i style={{ ...styles.rotateLine, ...(props.replaceRotateLineStyles || {}), }} />);\n  }\n  return (\n    <div\n      className={props.className}\n      style={{\n        ...styles.base,\n        ...styles[props.direction],\n        ...(props.replaceStyles || {}),\n      }}\n      onMouseDown={(e: SyntheticMouseEvent<HTMLDivElement>) => {\n        props.onResizeStart(e, props.direction);\n      }}\n      onTouchStart={(e: SyntheticTouchEvent<HTMLDivElement>) => {\n        props.onResizeStart(e, props.direction);\n      }}>\n      {children}\n    </div>);\n};\n","// @flow\nconst prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nexport function getPrefix(prop: string = 'transform'): string {\n  // Checking specifically for 'window.document' is for pseudo-browser server-side\n  // environments that define 'window' as the global context.\n  // E.g. React-rails (see https://github.com/reactjs/react-rails/pull/84)\n  if (typeof window === 'undefined' || typeof window.document === 'undefined') return '';\n\n  const style = window.document.documentElement.style;\n\n  if (prop in style) return '';\n\n  for (let i = 0; i < prefixes.length; i++) {\n    if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];\n  }\n\n  return '';\n}\n\nexport function browserPrefixToKey(prop: string, prefix: string): string {\n  return prefix ? `${prefix}${kebabToTitleCase(prop)}` : prop;\n}\n\nexport function browserPrefixToStyle(prop: string, prefix: string): string {\n  return prefix ? `-${prefix.toLowerCase()}-${prop}` : prop;\n}\n\nfunction kebabToTitleCase(str: string): string {\n  let out = '';\n  let shouldCapitalize = true;\n  for (let i = 0; i < str.length; i++) {\n    if (shouldCapitalize) {\n      out += str[i].toUpperCase();\n      shouldCapitalize = false;\n    } else if (str[i] === '-') {\n      shouldCapitalize = true;\n    } else {\n      out += str[i];\n    }\n  }\n  return out;\n}\n\n// Default export is the prefix itself, like 'Moz', 'Webkit', etc\n// Note that you may have to re-test for certain things; for instance, Chrome 50\n// can handle unprefixed `transform`, but not unprefixed `user-select`\nexport default getPrefix();\n","import browserPrefix, { browserPrefixToKey } from './getPrefix';\n\nexport function createCSSTransform({ x, y, degree }: { x: number, y: number, degree: number }): Object {\n  // Replace unitless items with px\n  let cssStyle = '';\n  if (degree) {\n    cssStyle = 'translate(' + x + 'px,' + y + 'px) rotate(' + degree + 'deg)';\n  } else if (x || y) {\n    cssStyle = 'translate(' + x + 'px,' + y + 'px)';\n  }\n  return { [browserPrefixToKey('transform', browserPrefix)]: cssStyle };\n}","/* @flow */\n\nimport * as React from 'react';\nimport Resizer from './resizer';\nimport { createCSSTransform } from './utils/domFns';\n\nimport type { Direction, OnStartCallback } from './resizer';\n\nconst userSelectNone = {\n  userSelect: 'none',\n  MozUserSelect: 'none',\n  WebkitUserSelect: 'none',\n  MsUserSelect: 'none',\n};\n\nconst userSelectAuto = {\n  userSelect: 'auto',\n  MozUserSelect: 'auto',\n  WebkitUserSelect: 'auto',\n  MsUserSelect: 'auto',\n};\n\nexport type ResizeDirection = Direction;\n\nexport type Style = {\n  [key: string]: string | number;\n}\n\nexport type Enable = {\n  top?: boolean;\n  right?: boolean;\n  bottom?: boolean;\n  left?: boolean;\n  topRight?: boolean;\n  bottomRight?: boolean;\n  bottomLeft?: boolean;\n  topLeft?: boolean;\n  topCenter?: boolean;\n  rightCenter?: boolean;\n  bottomCenter?: boolean;\n  leftCenter?: boolean;\n  rotate?: boolean;\n}\n\nexport type HandleStyles = {\n  top?: Style;\n  right?: Style;\n  bottom?: Style;\n  left?: Style;\n  topRight?: Style;\n  bottomRight?: Style;\n  bottomLeft?: Style;\n  topLeft?: Style;\n  topCenter?: Style;\n  rightCenter?: Style;\n  bottomCenter?: Style;\n  leftCenter?: Style;\n  rotate?: Style;\n}\n\nexport type HandleClassName = {\n  top?: string;\n  right?: string;\n  bottom?: string;\n  left?: string;\n  topRight?: string;\n  bottomRight?: string;\n  bottomLeft?: string;\n  topLeft?: string;\n  topCenter?: string;\n  rightCenter?: string;\n  bottomCenter?: string;\n  leftCenter?: string;\n  rotate?: string;\n}\n\nexport type Size = {\n  width: string | number;\n  height: string | number;\n}\nexport type Position = {\n  x: string | number;\n  y: string | number;\n}\n\ntype NumberSize = {\n  width: number;\n  height: number;\n}\n\nexport type ResizeCallback = (\n  event: MouseEvent | TouchEvent,\n  direction: Direction,\n  elementRef: React.ElementRef<'div'>,\n  delta: NumberSize,\n) => void;\n\nexport type ResizeStartCallback = (\n  e: SyntheticMouseEvent<HTMLDivElement> | SyntheticTouchEvent<HTMLDivElement>,\n  dir: Direction,\n  elementRef: React.ElementRef<'div'>,\n) => void;\n\nexport type ResizableProps = {\n  style?: Style;\n  className?: string;\n  grid?: [number, number];\n  bounds?: 'parent' | 'window' | HTMLElement;\n  size?: Size;\n  position?: Position;\n  minWidth?: string | number;\n  minHeight?: string | number;\n  maxWidth?: string | number;\n  maxHeight?: string | number;\n  lockAspectRatio?: boolean;\n  enable?: Enable;\n  handleStyles?: HandleStyles;\n  handleClasses?: HandleClassName;\n  handleWrapperStyle?: Style;\n  handleWrapperClass?: string;\n  children?: React.Node;\n  onResizeStart?: ResizeStartCallback;\n  onResize?: ResizeCallback;\n  onResizeStop?: ResizeCallback;\n  defaultSize?: Size;\n}\n\ntype State = {\n  isResizing: boolean;\n  direction: Direction;\n  original: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  };\n  width: number | string;\n  height: number | string;\n  degree: number;\n}\n\nconst clamp = (n: number, min: number, max: number): number => Math.max(Math.min(n, max), min);\nconst snap = (n: number, size: number): number => Math.round(n / size) * size;\n\nconst getStringSize = (n: number | string): string => {\n  if (n.toString().endsWith('px')) return n.toString();\n  if (n.toString().endsWith('%')) return n.toString();\n  return `${n}px`;\n};\n\nlet baseSizeId = 0;\n\nconst definedProps = [\n  'style', 'className', 'grid', 'bounds', 'size', 'defaultSize',\n  'minWidth', 'minHeight', 'maxWidth', 'maxHeight', 'lockAspectRatio',\n  'enable', 'handleStyles', 'handleClasses', 'handleWrapperStyle',\n  'handleWrapperClass', 'children', 'onResizeStart', 'onResize', 'onResizeStop', 'position',\n];\n\nexport default class Resizable extends React.Component<ResizableProps, State> {\n  resizable: React.ElementRef<'div'>;\n  onTouchMove: ResizeCallback;\n  onMouseMove: ResizeCallback;\n  onMouseUp: ResizeCallback;\n  onResizeStart: OnStartCallback;\n  baseSizeId: string;\n  extendsProps: { [key: string]: any };\n\n  static defaultProps = {\n    onResizeStart: () => { },\n    onResize: () => { },\n    onResizeStop: () => { },\n    enable: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      topRight: true,\n      bottomRight: true,\n      bottomLeft: true,\n      topLeft: true,\n      topCenter: true,\n      rightCenter: true,\n      bottomCenter: true,\n      leftCenter: true,\n      rotate: true,\n    },\n    style: {},\n    grid: [1, 1],\n    lockAspectRatio: false,\n    position: { x: 0, y: 0 }\n  }\n\n  constructor(props: ResizableProps) {\n    super(props);\n    this.state = {\n      isResizing: false,\n      width: typeof (this.propsSize && this.propsSize.width) === 'undefined'\n        ? 'auto'\n        : ((this.propsSize && this.propsSize.width): any),\n      height: typeof (this.propsSize && this.propsSize.height) === 'undefined'\n        ? 'auto'\n        : ((this.propsSize && this.propsSize.height): any),\n      direction: 'right',\n      original: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n      degree: 0\n    };\n\n    this.updateExtendsProps(props);\n    this.onResizeStart = this.onResizeStart.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.baseSizeId = `__resizable${baseSizeId}`;\n    baseSizeId += 1;\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('mouseup', this.onMouseUp);\n      window.addEventListener('mousemove', this.onMouseMove);\n      window.addEventListener('touchmove', this.onMouseMove);\n      window.addEventListener('touchend', this.onMouseUp);\n    }\n  }\n\n  get parentNode(): HTMLElement {\n    return ((this.resizable: any).parentNode: any);\n  }\n\n  get propsSize(): ?Size {\n    return this.props.size || this.props.defaultSize;\n  }\n\n  updateExtendsProps(props: ResizableProps) {\n    this.extendsProps = Object.keys(props).reduce((acc, key) => {\n      if (definedProps.includes(key)) return acc;\n      acc[key] = props[key];\n      return acc;\n    }, {});\n  }\n\n  getParentSize(): { width: number, height: number } {\n    const base = (document.getElementById(this.baseSizeId): any);\n    if (!base) return { width: window.innerWidth, height: window.innerHeight };\n    return {\n      width: (base: HTMLDivElement).offsetWidth,\n      height: (base: HTMLDivElement).offsetHeight,\n    };\n  }\n\n  componentDidMount() {\n    const size = this.size;\n    this.setState({\n      width: this.state.width || size.width,\n      height: this.state.height || size.height,\n    });\n    const element = document.createElement('div');\n    element.id = this.baseSizeId;\n    element.style.width = '100%';\n    element.style.height = '100%';\n    element.style.position = 'relative';\n    element.style.transform = 'scale(0, 0)';\n    element.style.left = '-2147483647px';\n    const parent = this.parentNode;\n    if (!(parent instanceof HTMLElement)) return;\n    parent.appendChild(element);\n  }\n\n  componentWillReceiveProps(next: ResizableProps) {\n    this.updateExtendsProps(next);\n  }\n\n  componentWillUnmount() {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('mouseup', this.onMouseUp);\n      window.removeEventListener('mousemove', this.onMouseMove);\n      window.removeEventListener('touchmove', this.onMouseMove);\n      window.removeEventListener('touchend', this.onMouseUp);\n\n      const parent = this.parentNode;\n      const base = document.getElementById(this.baseSizeId);\n      if (!base) return;\n      if (!(parent instanceof HTMLElement) || !(base instanceof Node)) return;\n      parent.removeChild(base);\n    }\n  }\n\n  onResizeStart(\n    event: SyntheticMouseEvent<HTMLDivElement> | SyntheticTouchEvent<HTMLDivElement>,\n    direction: Direction,\n  ) {\n    let clientX = 0;\n    let clientY = 0;\n    if (event.nativeEvent instanceof MouseEvent) {\n      clientX = event.nativeEvent.clientX;\n      clientY = event.nativeEvent.clientY;\n\n      // When user click with right button the resize is stuck in resizing mode\n      // until users clicks again, dont continue if right click is used.\n      if (event.nativeEvent.which === 3) {\n        return;\n      }\n    } else if (event.nativeEvent instanceof TouchEvent) {\n      clientX = event.nativeEvent.touches[0].clientX;\n      clientY = event.nativeEvent.touches[0].clientY;\n    }\n    if (this.props.onResizeStart) {\n      this.props.onResizeStart(event, direction, (this.resizable: React.ElementRef<'div'>));\n    }\n    this.setState({\n      original: {\n        x: clientX,\n        y: clientY,\n        width: this.size.width,\n        height: this.size.height,\n      },\n      isResizing: true,\n      direction,\n    });\n  }\n\n  onMouseMove(event: MouseEvent | TouchEvent) {\n    if (!this.state.isResizing) return;\n    const clientX = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;\n    const clientY = event instanceof MouseEvent ? event.clientY : event.touches[0].clientY;\n    const { direction, original, width, height } = this.state;\n    const { lockAspectRatio } = this.props;\n    let { maxWidth, maxHeight, minWidth, minHeight } = this.props;\n\n    // TODO: refactor\n    const parentSize = this.getParentSize();\n    if (maxWidth && typeof maxWidth === 'string' && maxWidth.endsWith('%')) {\n      const ratio = Number(maxWidth.replace('%', '')) / 100;\n      maxWidth = parentSize.width * ratio;\n    }\n    if (maxHeight && typeof maxHeight === 'string' && maxHeight.endsWith('%')) {\n      const ratio = Number(maxHeight.replace('%', '')) / 100;\n      maxHeight = parentSize.height * ratio;\n    }\n    if (minWidth && typeof minWidth === 'string' && minWidth.endsWith('%')) {\n      const ratio = Number(minWidth.replace('%', '')) / 100;\n      minWidth = parentSize.width * ratio;\n    }\n    if (minHeight && typeof minHeight === 'string' && minHeight.endsWith('%')) {\n      const ratio = Number(minHeight.replace('%', '')) / 100;\n      minHeight = parentSize.height * ratio;\n    }\n    maxWidth = typeof maxWidth === 'undefined' ? undefined : Number(maxWidth);\n    maxHeight = typeof maxHeight === 'undefined' ? undefined : Number(maxHeight);\n    minWidth = typeof minWidth === 'undefined' ? undefined : Number(minWidth);\n    minHeight = typeof minHeight === 'undefined' ? undefined : Number(minHeight);\n\n    const ratio = original.height / original.width;\n    let newWidth = original.width;\n    let newHeight = original.height;\n    if (/right/i.test(direction)) {\n      newWidth = original.width + (clientX - original.x);\n      if (lockAspectRatio) newHeight = newWidth * ratio;\n    }\n    if (/left/i.test(direction)) {\n      newWidth = original.width - (clientX - original.x);\n      if (lockAspectRatio) newHeight = newWidth * ratio;\n    }\n    if (/bottom/i.test(direction)) {\n      newHeight = original.height + (clientY - original.y);\n      if (lockAspectRatio) newWidth = newHeight / ratio;\n    }\n    if (/top/i.test(direction)) {\n      newHeight = original.height - (clientY - original.y);\n      if (lockAspectRatio) newWidth = newHeight / ratio;\n    }\n\n    let degree = this.state.degree;\n    if (/rotate/i.test(direction)) {\n\n      const rect = this.resizable.getBoundingClientRect(),\n        center_x = (rect.left + rect.right) / 2,\n        center_y = (rect.top + rect.bottom) / 2,\n        radians = Math.atan2(clientX - center_x, clientY - center_y);\n\n      console.log(rect, center_x);\n\n      degree = Math.round((radians * (180 / Math.PI) * -1) + 100) + 80;\n      const { position } = this.props;\n      let style = null;\n      if (position) {\n        const { x, y } = position;\n        style = createCSSTransform({ x, y, degree: this.state.degree });\n      }\n\n      if (style) {\n        Object.keys(style).map((key) => {\n          if (style && key && style[key]) {\n            this.resizable.style[key] = style[key];\n          }\n        });\n      }\n    }\n\n    if (this.props.bounds === 'parent') {\n      const parent = this.parentNode;\n      if (parent instanceof HTMLElement) {\n        const parentRect = parent.getBoundingClientRect();\n        const parentLeft = parentRect.left;\n        const parentTop = parentRect.top;\n        const { left, top } = this.resizable.getBoundingClientRect();\n        const boundWidth = parent.offsetWidth + (parentLeft - left);\n        const boundHeight = parent.offsetHeight + (parentTop - top);\n        maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n        maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n      }\n    } else if (this.props.bounds === 'window') {\n      if (typeof window !== 'undefined') {\n        const { left, top } = this.resizable.getBoundingClientRect();\n        const boundWidth = window.innerWidth - left;\n        const boundHeight = window.innerHeight - top;\n        maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n        maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n      }\n    } else if (this.props.bounds instanceof HTMLElement) {\n      const targetRect = this.props.bounds.getBoundingClientRect();\n      const targetLeft = targetRect.left;\n      const targetTop = targetRect.top;\n      const { left, top } = this.resizable.getBoundingClientRect();\n      if (!(this.props.bounds instanceof HTMLElement)) return;\n      const boundWidth = this.props.bounds.offsetWidth + (targetLeft - left);\n      const boundHeight = this.props.bounds.offsetHeight + (targetTop - top);\n      maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n      maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n    }\n\n    const computedMinWidth = (typeof minWidth === 'undefined' || minWidth < 10) ? 10 : minWidth;\n    const computedMaxWidth = (typeof maxWidth === 'undefined' || maxWidth < 0) ? newWidth : maxWidth;\n    const computedMinHeight = (typeof minHeight === 'undefined' || minHeight < 10) ? 10 : minHeight;\n    const computedMaxHeight = (typeof maxHeight === 'undefined' || maxHeight < 0) ? newHeight : maxHeight;\n\n    if (lockAspectRatio) {\n      const lockedMinWidth = computedMinWidth > computedMinHeight / ratio ? computedMinWidth : computedMinHeight / ratio;\n      const lockedMaxWidth = computedMaxWidth < computedMaxHeight / ratio ? computedMaxWidth : computedMaxHeight / ratio;\n      const lockedMinHeight = computedMinHeight > computedMinWidth * ratio ? computedMinHeight : computedMinWidth * ratio;\n      const lockedMaxHeight = computedMaxHeight < computedMaxWidth * ratio ? computedMaxHeight : computedMaxWidth * ratio;\n      newWidth = clamp(newWidth, lockedMinWidth, lockedMaxWidth);\n      newHeight = clamp(newHeight, lockedMinHeight, lockedMaxHeight);\n    } else {\n      newWidth = clamp(newWidth, computedMinWidth, computedMaxWidth);\n      newHeight = clamp(newHeight, computedMinHeight, computedMaxHeight);\n    }\n    if (this.props.grid) {\n      newWidth = snap(newWidth, this.props.grid[0]);\n    }\n    if (this.props.grid) {\n      newHeight = snap(newHeight, this.props.grid[1]);\n    }\n\n    const delta = {\n      width: newWidth - original.width,\n      height: newHeight - original.height,\n      newWidth: newWidth,\n      newHeight: newHeight,\n      degree\n    };\n\n    if (width && typeof width === 'string' && width.endsWith('%')) {\n      const percent = (newWidth / parentSize.width) * 100;\n      newWidth = `${percent}%`;\n    }\n\n    if (height && typeof height === 'string' && height.endsWith('%')) {\n      const percent = (newHeight / parentSize.height) * 100;\n      newHeight = `${percent}%`;\n    }\n\n    this.setState({\n      width: width !== 'auto' || typeof this.props.width === 'undefined' ? newWidth : 'auto',\n      height: height !== 'auto' || typeof this.props.height === 'undefined' ? newHeight : 'auto',\n      degree,\n    });\n\n    if (this.props.onResize) {\n      this.props.onResize(event, direction, this.resizable, delta);\n    }\n  }\n\n  onMouseUp(event: MouseEvent | TouchEvent) {\n    const { isResizing, direction, original, degree } = this.state;\n    if (!isResizing) return;\n    const delta = {\n      width: this.size.width - original.width,\n      height: this.size.height - original.height,\n      newWidth: this.size.width,\n      newHeight: this.size.height,\n      degree,\n    };\n    if (this.props.onResizeStop) {\n      this.props.onResizeStop(event, direction, this.resizable, delta);\n    }\n    if (this.props.size) {\n      this.setState(this.props.size);\n    }\n    this.setState({ isResizing: false });\n  }\n\n  get degree(): number {\n    return this.state.degree;\n  }\n  get size(): NumberSize {\n    let width = 0;\n    let height = 0;\n    if (typeof window !== 'undefined') {\n      width = this.resizable.offsetWidth;\n      height = this.resizable.offsetHeight;\n    }\n    return { width, height };\n  }\n\n  get sizeStyle(): { width: string, height: string } {\n    const { size } = this.props;\n    const getSize = (key: 'width' | 'height'): string => {\n      if (typeof this.state[key] === 'undefined' || this.state[key] === 'auto') return 'auto';\n      if (this.propsSize && this.propsSize[key] && this.propsSize[key].toString().endsWith('%')) {\n        if (this.state[key].toString().endsWith('%')) return this.state[key].toString();\n        const parentSize = this.getParentSize();\n        const value = Number(this.state[key].toString().replace('px', ''));\n        const percent = (value / parentSize[key]) * 100;\n        return `${percent}%`;\n      }\n      return getStringSize(this.state[key]);\n    };\n    const width = ((size && size.width) && !this.state.isResizing)\n      ? getStringSize(size.width)\n      : getSize('width');\n    const height = ((size && size.height) && !this.state.isResizing)\n      ? getStringSize(size.height)\n      : getSize('height');\n    return { width, height };\n  }\n\n  updateSize(size: Size) {\n    this.setState({ width: size.width, height: size.height });\n  }\n\n  renderResizer(): React.Node {\n    const { enable, handleStyles, handleClasses, handleWrapperStyle, handleWrapperClass } = this.props;\n    if (!enable) return null;\n    const resizers = Object.keys(enable).map((dir: Direction): React$Node => {\n      if (enable[dir] !== false) {\n        return (\n          <Resizer\n            key={dir}\n            direction={dir}\n            onResizeStart={this.onResizeStart}\n            replaceStyles={handleStyles && handleStyles[dir]}\n            className={handleClasses && handleClasses[dir]}\n          />\n        );\n      }\n      return null;\n    });\n\n    // #93 Wrap the resize box in span (will not break 100% width/height)\n    return (\n      <span\n        className={handleWrapperClass}\n        style={handleWrapperStyle}\n      >\n        {resizers}\n      </span>);\n  }\n\n  render(): React.Node {\n    const userSelect = this.state.isResizing ? userSelectNone : userSelectAuto;\n\n    return (\n      <div\n        ref={(c: React.ElementRef<'div'> | null) => { this.resizable = c; }}\n        style={{\n          position: 'relative',\n          ...userSelect,\n          ...this.props.style,\n          ...this.sizeStyle,\n          maxWidth: this.props.maxWidth,\n          maxHeight: this.props.maxHeight,\n          minWidth: this.props.minWidth,\n          minHeight: this.props.minHeight,\n          boxSizing: 'border-box',\n        }}\n        className={this.props.className}\n        {...this.extendsProps}\n      >\n        {this.props.children}\n        {this.renderResizer()}\n      </div>\n    );\n  }\n}\n"],"names":["styles","props","direction","children","React.createElement","rotateLine","replaceRotateLineStyles","className","base","replaceStyles","e","onResizeStart","prefixes","getPrefix","prop","window","document","style","documentElement","i","length","browserPrefixToKey","prefix","kebabToTitleCase","str","out","shouldCapitalize","toUpperCase","createCSSTransform","x","y","degree","cssStyle","browserPrefix","userSelectNone","userSelectAuto","clamp","n","min","max","Math","snap","size","round","getStringSize","toString","endsWith","baseSizeId","definedProps","Resizable","state","propsSize","width","height","updateExtendsProps","bind","onMouseMove","onMouseUp","addEventListener","extendsProps","Object","keys","reduce","acc","key","includes","getElementById","innerWidth","innerHeight","offsetWidth","offsetHeight","setState","element","createElement","id","position","transform","left","parent","parentNode","HTMLElement","appendChild","next","removeEventListener","Node","removeChild","event","clientX","clientY","nativeEvent","MouseEvent","which","TouchEvent","touches","resizable","isResizing","original","lockAspectRatio","maxWidth","maxHeight","minWidth","minHeight","parentSize","getParentSize","ratio","Number","replace","undefined","newWidth","newHeight","test","rect","getBoundingClientRect","center_x","right","center_y","top","bottom","radians","atan2","log","PI","map","bounds","parentRect","parentLeft","parentTop","boundWidth","boundHeight","targetRect","targetLeft","targetTop","computedMinWidth","computedMaxWidth","computedMinHeight","computedMaxHeight","lockedMinWidth","lockedMaxWidth","lockedMinHeight","lockedMaxHeight","grid","delta","percent","onResize","onResizeStop","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","resizers","dir","userSelect","c","sizeStyle","renderResizer","defaultSize","getSize","value","React","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,SAAS;QACP;cACM;GAFC;OAIR;WACI,MADJ;YAEK,MAFL;SAGE,MAHF;UAIG,KAJH;YAKK;GATG;SAWN;WACE,MADF;YAEG,MAFH;SAGA,KAHA;WAIE,MAJF;YAKG;GAhBG;UAkBL;WACC,MADD;YAEE,MAFF;YAGE,MAHF;UAIA,KAJA;YAKE;GAvBG;QAyBP;WACG,MADH;YAEI,MAFJ;SAGC,KAHD;UAIE,MAJF;YAKI;GA9BG;;YAiCH;WACD,MADC;YAEA,MAFA;cAGE,UAHF;WAID,OAJC;SAKH,OALG;YAMA;GAvCG;eAyCA;WACJ,MADI;YAEH,MAFG;cAGD,UAHC;WAIJ,OAJI;YAKH,OALG;YAMH;GA/CG;cAiDD;WACH,MADG;YAEF,MAFE;cAGA,UAHA;UAIJ,OAJI;YAKF,OALE;YAMF;GAvDG;WAyDJ;WACA,MADA;YAEC,MAFD;cAGG,UAHH;UAID,OAJC;SAKF,OALE;YAMC;GA/DG;aAiEF;WACF,MADE;YAED,MAFC;cAGC,UAHD;UAIH,KAJG;SAKJ,OALI;gBAMG,OANH;YAOD;GAxEG;eA0EA;WACJ,MADI;YAEH,MAFG;cAGD,UAHC;SAIN,KAJM;WAKJ,OALI;eAMA,OANA;YAOH;GAjFG;gBAmFC;WACL,MADK;YAEJ,MAFI;cAGF,UAHE;UAIN,KAJM;YAKJ,OALI;gBAMA,OANA;YAOJ;GA1FG;cA4FD;WACH,MADG;YAEF,MAFE;cAGA,UAHA;SAIL,KAJK;UAKJ,OALI;eAMC,OAND;YAOF;GAnGG;UAqGL;WACC,MADD;YAEE,MAFF;cAGI,UAHJ;UAIA,KAJA;SAKD,OALC;gBAMM,OANN;YAOE;GA5GG;cA8GD;cACA,UADA;WAEH,KAFG;YAGF,MAHE;SAIL,KAJK;UAKJ,KALI;gBAME,MANF;qBAOO,SAPP;YAQF,CAAC;;CAtHb;;AAyIA,eAAe,UAACC,KAAD,EAAwC;MAC/CC,YAAYD,MAAMC,SAAxB;MACIC,WAAW,IAAf;MACID,cAAc,QAAlB,EAA4B;eACdE,qBAAG,oBAAYJ,OAAOK,UAAnB,EAAmCJ,MAAMK,uBAAN,IAAiC,EAApE,CAAH,GAAZ;;SAGAF;;;iBACaH,MAAMM,SADnB;0BAGOP,OAAOQ,IADZ,EAEKR,OAAOC,MAAMC,SAAb,CAFL,EAGMD,MAAMQ,aAAN,IAAuB,EAH7B,CAFF;mBAOe,qBAACC,CAAD,EAA4C;cACjDC,aAAN,CAAoBD,CAApB,EAAuBT,MAAMC,SAA7B;OARJ;oBAUgB,sBAACQ,CAAD,EAA4C;cAClDC,aAAN,CAAoBD,CAApB,EAAuBT,MAAMC,SAA7B;OAXJ;;GADF;CANF;;AC5IA,IAAMU,WAAW,CAAC,KAAD,EAAQ,QAAR,EAAkB,GAAlB,EAAuB,IAAvB,CAAjB;AACA,AAAO,SAASC,SAAT,GAAuD;MAApCC,IAAoC,uEAArB,WAAqB;;;;;MAIxD,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,OAAOC,QAAd,KAA2B,WAAhE,EAA6E,OAAO,EAAP;;MAEvEC,QAAQF,OAAOC,QAAP,CAAgBE,eAAhB,CAAgCD,KAA9C;;MAEIH,QAAQG,KAAZ,EAAmB,OAAO,EAAP;;OAEd,IAAIE,IAAI,CAAb,EAAgBA,IAAIP,SAASQ,MAA7B,EAAqCD,GAArC,EAA0C;QACpCE,mBAAmBP,IAAnB,EAAyBF,SAASO,CAAT,CAAzB,KAAyCF,KAA7C,EAAoD,OAAOL,SAASO,CAAT,CAAP;;;SAG/C,EAAP;;;AAGF,AAAO,SAASE,kBAAT,CAA4BP,IAA5B,EAA0CQ,MAA1C,EAAkE;SAChEA,cAAYA,MAAZ,GAAqBC,iBAAiBT,IAAjB,CAArB,GAAgDA,IAAvD;;;AAGF;;AAIA,SAASS,gBAAT,CAA0BC,GAA1B,EAA+C;MACzCC,MAAM,EAAV;MACIC,mBAAmB,IAAvB;OACK,IAAIP,IAAI,CAAb,EAAgBA,IAAIK,IAAIJ,MAAxB,EAAgCD,GAAhC,EAAqC;QAC/BO,gBAAJ,EAAsB;aACbF,IAAIL,CAAJ,EAAOQ,WAAP,EAAP;yBACmB,KAAnB;KAFF,MAGO,IAAIH,IAAIL,CAAJ,MAAW,GAAf,EAAoB;yBACN,IAAnB;KADK,MAEA;aACEK,IAAIL,CAAJ,CAAP;;;SAGGM,GAAP;;;;;;AAMF,oBAAeZ,WAAf;;AC5CO,SAASe,kBAAT,OAAgG;MAAlEC,CAAkE,QAAlEA,CAAkE;MAA/DC,CAA+D,QAA/DA,CAA+D;MAA5DC,MAA4D,QAA5DA,MAA4D;;;MAEjGC,WAAW,EAAf;MACID,MAAJ,EAAY;eACC,eAAeF,CAAf,GAAmB,KAAnB,GAA2BC,CAA3B,GAA+B,aAA/B,GAA+CC,MAA/C,GAAwD,MAAnE;GADF,MAEO,IAAIF,KAAKC,CAAT,EAAY;eACN,eAAeD,CAAf,GAAmB,KAAnB,GAA2BC,CAA3B,GAA+B,KAA1C;;4BAEQT,mBAAmB,WAAnB,EAAgCY,aAAhC,CAAV,EAA2DD,QAA3D;;;ACFF,IAAME,iBAAiB;cACT,MADS;iBAEN,MAFM;oBAGH,MAHG;gBAIP;CAJhB;;AAOA,IAAMC,iBAAiB;cACT,MADS;iBAEN,MAFM;oBAGH,MAHG;gBAIP;CAJhB;;AA8HA,IAAMC,QAAQ,SAARA,KAAQ,CAACC,CAAD,EAAYC,GAAZ,EAAyBC,GAAzB;SAAiDC,KAAKD,GAAL,CAASC,KAAKF,GAAL,CAASD,CAAT,EAAYE,GAAZ,CAAT,EAA2BD,GAA3B,CAAjD;CAAd;AACA,IAAMG,OAAO,SAAPA,IAAO,CAACJ,CAAD,EAAYK,IAAZ;SAAqCF,KAAKG,KAAL,CAAWN,IAAIK,IAAf,IAAuBA,IAA5D;CAAb;;AAEA,IAAME,gBAAgB,SAAhBA,aAAgB,CAACP,CAAD,EAAgC;MAChDA,EAAEQ,QAAF,GAAaC,QAAb,CAAsB,IAAtB,CAAJ,EAAiC,OAAOT,EAAEQ,QAAF,EAAP;MAC7BR,EAAEQ,QAAF,GAAaC,QAAb,CAAsB,GAAtB,CAAJ,EAAgC,OAAOT,EAAEQ,QAAF,EAAP;SACtBR,CAAV;CAHF;;AAMA,IAAIU,aAAa,CAAjB;;AAEA,IAAMC,eAAe,CACnB,OADmB,EACV,WADU,EACG,MADH,EACW,QADX,EACqB,MADrB,EAC6B,aAD7B,EAEnB,UAFmB,EAEP,WAFO,EAEM,UAFN,EAEkB,WAFlB,EAE+B,iBAF/B,EAGnB,QAHmB,EAGT,cAHS,EAGO,eAHP,EAGwB,oBAHxB,EAInB,oBAJmB,EAIG,UAJH,EAIe,eAJf,EAIgC,UAJhC,EAI4C,cAJ5C,EAI4D,UAJ5D,CAArB;;IAOqBC;;;qBAkCPhD,KAAZ,EAAmC;;;qHAC3BA,KAD2B;;UAE5BiD,KAAL,GAAa;kBACC,KADD;aAEJ,QAAQ,MAAKC,SAAL,IAAkB,MAAKA,SAAL,CAAeC,KAAzC,MAAoD,WAApD,GACH,MADG,GAED,MAAKD,SAAL,IAAkB,MAAKA,SAAL,CAAeC,KAJ5B;cAKH,QAAQ,MAAKD,SAAL,IAAkB,MAAKA,SAAL,CAAeE,MAAzC,MAAqD,WAArD,GACJ,MADI,GAEF,MAAKF,SAAL,IAAkB,MAAKA,SAAL,CAAeE,MAP5B;iBAQA,OARA;gBASD;WACL,CADK;WAEL,CAFK;eAGD,CAHC;gBAIA;OAbC;cAeH;KAfV;;UAkBKC,kBAAL,CAAwBrD,KAAxB;UACKU,aAAL,GAAqB,MAAKA,aAAL,CAAmB4C,IAAnB,OAArB;UACKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBD,IAAjB,OAAnB;UACKE,SAAL,GAAiB,MAAKA,SAAL,CAAeF,IAAf,OAAjB;UACKR,UAAL,mBAAgCA,UAAhC;kBACc,CAAd;;QAEI,OAAOhC,MAAP,KAAkB,WAAtB,EAAmC;aAC1B2C,gBAAP,CAAwB,SAAxB,EAAmC,MAAKD,SAAxC;aACOC,gBAAP,CAAwB,WAAxB,EAAqC,MAAKF,WAA1C;aACOE,gBAAP,CAAwB,WAAxB,EAAqC,MAAKF,WAA1C;aACOE,gBAAP,CAAwB,UAAxB,EAAoC,MAAKD,SAAzC;;;;;;;uCAYexD,OAAuB;WACnC0D,YAAL,GAAoBC,OAAOC,IAAP,CAAY5D,KAAZ,EAAmB6D,MAAnB,CAA0B,UAACC,GAAD,EAAMC,GAAN,EAAc;YACtDhB,aAAaiB,QAAb,CAAsBD,GAAtB,CAAJ,EAAgC,OAAOD,GAAP;YAC5BC,GAAJ,IAAW/D,MAAM+D,GAAN,CAAX;eACOD,GAAP;OAHkB,EAIjB,EAJiB,CAApB;;;;oCAOiD;UAC3CvD,OAAQQ,SAASkD,cAAT,CAAwB,KAAKnB,UAA7B,CAAd;UACI,CAACvC,IAAL,EAAW,OAAO,EAAE4C,OAAOrC,OAAOoD,UAAhB,EAA4Bd,QAAQtC,OAAOqD,WAA3C,EAAP;aACJ;eACG5D,IAAD,CAAuB6D,WADzB;gBAEI7D,IAAD,CAAuB8D;OAFjC;;;;wCAMkB;UACZ5B,OAAO,KAAKA,IAAlB;WACK6B,QAAL,CAAc;eACL,KAAKrB,KAAL,CAAWE,KAAX,IAAoBV,KAAKU,KADpB;gBAEJ,KAAKF,KAAL,CAAWG,MAAX,IAAqBX,KAAKW;OAFpC;UAIMmB,UAAUxD,SAASyD,aAAT,CAAuB,KAAvB,CAAhB;cACQC,EAAR,GAAa,KAAK3B,UAAlB;cACQ9B,KAAR,CAAcmC,KAAd,GAAsB,MAAtB;cACQnC,KAAR,CAAcoC,MAAd,GAAuB,MAAvB;cACQpC,KAAR,CAAc0D,QAAd,GAAyB,UAAzB;cACQ1D,KAAR,CAAc2D,SAAd,GAA0B,aAA1B;cACQ3D,KAAR,CAAc4D,IAAd,GAAqB,eAArB;UACMC,SAAS,KAAKC,UAApB;UACI,EAAED,kBAAkBE,WAApB,CAAJ,EAAsC;aAC/BC,WAAP,CAAmBT,OAAnB;;;;8CAGwBU,MAAsB;WACzC5B,kBAAL,CAAwB4B,IAAxB;;;;2CAGqB;UACjB,OAAOnE,MAAP,KAAkB,WAAtB,EAAmC;eAC1BoE,mBAAP,CAA2B,SAA3B,EAAsC,KAAK1B,SAA3C;eACO0B,mBAAP,CAA2B,WAA3B,EAAwC,KAAK3B,WAA7C;eACO2B,mBAAP,CAA2B,WAA3B,EAAwC,KAAK3B,WAA7C;eACO2B,mBAAP,CAA2B,UAA3B,EAAuC,KAAK1B,SAA5C;;YAEMqB,SAAS,KAAKC,UAApB;YACMvE,OAAOQ,SAASkD,cAAT,CAAwB,KAAKnB,UAA7B,CAAb;YACI,CAACvC,IAAL,EAAW;YACP,EAAEsE,kBAAkBE,WAApB,KAAoC,EAAExE,gBAAgB4E,IAAlB,CAAxC,EAAiE;eAC1DC,WAAP,CAAmB7E,IAAnB;;;;;kCAKF8E,OACApF,WACA;UACIqF,UAAU,CAAd;UACIC,UAAU,CAAd;UACIF,MAAMG,WAAN,YAA6BC,UAAjC,EAA6C;kBACjCJ,MAAMG,WAAN,CAAkBF,OAA5B;kBACUD,MAAMG,WAAN,CAAkBD,OAA5B;;;;YAIIF,MAAMG,WAAN,CAAkBE,KAAlB,KAA4B,CAAhC,EAAmC;;;OANrC,MASO,IAAIL,MAAMG,WAAN,YAA6BG,UAAjC,EAA6C;kBACxCN,MAAMG,WAAN,CAAkBI,OAAlB,CAA0B,CAA1B,EAA6BN,OAAvC;kBACUD,MAAMG,WAAN,CAAkBI,OAAlB,CAA0B,CAA1B,EAA6BL,OAAvC;;UAEE,KAAKvF,KAAL,CAAWU,aAAf,EAA8B;aACvBV,KAAL,CAAWU,aAAX,CAAyB2E,KAAzB,EAAgCpF,SAAhC,EAA4C,KAAK4F,SAAjD;;WAEGvB,QAAL,CAAc;kBACF;aACLgB,OADK;aAELC,OAFK;iBAGD,KAAK9C,IAAL,CAAUU,KAHT;kBAIA,KAAKV,IAAL,CAAUW;SALR;oBAOA,IAPA;;OAAd;;;;gCAYUiC,OAAgC;;;UACtC,CAAC,KAAKpC,KAAL,CAAW6C,UAAhB,EAA4B;UACtBR,UAAUD,iBAAiBI,UAAjB,GAA8BJ,MAAMC,OAApC,GAA8CD,MAAMO,OAAN,CAAc,CAAd,EAAiBN,OAA/E;UACMC,UAAUF,iBAAiBI,UAAjB,GAA8BJ,MAAME,OAApC,GAA8CF,MAAMO,OAAN,CAAc,CAAd,EAAiBL,OAA/E;mBAC+C,KAAKtC,KAJV;UAIlChD,SAJkC,UAIlCA,SAJkC;UAIvB8F,QAJuB,UAIvBA,QAJuB;UAIb5C,KAJa,UAIbA,KAJa;UAINC,MAJM,UAINA,MAJM;UAKlC4C,eALkC,GAKd,KAAKhG,KALS,CAKlCgG,eALkC;mBAMS,KAAKhG,KANd;UAMpCiG,QANoC,UAMpCA,QANoC;UAM1BC,SAN0B,UAM1BA,SAN0B;UAMfC,QANe,UAMfA,QANe;UAMLC,SANK,UAMLA,SANK;;;;UASpCC,aAAa,KAAKC,aAAL,EAAnB;UACIL,YAAY,OAAOA,QAAP,KAAoB,QAAhC,IAA4CA,SAASpD,QAAT,CAAkB,GAAlB,CAAhD,EAAwE;YAChE0D,SAAQC,OAAOP,SAASQ,OAAT,CAAiB,GAAjB,EAAsB,EAAtB,CAAP,IAAoC,GAAlD;mBACWJ,WAAWlD,KAAX,GAAmBoD,MAA9B;;UAEEL,aAAa,OAAOA,SAAP,KAAqB,QAAlC,IAA8CA,UAAUrD,QAAV,CAAmB,GAAnB,CAAlD,EAA2E;YACnE0D,UAAQC,OAAON,UAAUO,OAAV,CAAkB,GAAlB,EAAuB,EAAvB,CAAP,IAAqC,GAAnD;oBACYJ,WAAWjD,MAAX,GAAoBmD,OAAhC;;UAEEJ,YAAY,OAAOA,QAAP,KAAoB,QAAhC,IAA4CA,SAAStD,QAAT,CAAkB,GAAlB,CAAhD,EAAwE;YAChE0D,UAAQC,OAAOL,SAASM,OAAT,CAAiB,GAAjB,EAAsB,EAAtB,CAAP,IAAoC,GAAlD;mBACWJ,WAAWlD,KAAX,GAAmBoD,OAA9B;;UAEEH,aAAa,OAAOA,SAAP,KAAqB,QAAlC,IAA8CA,UAAUvD,QAAV,CAAmB,GAAnB,CAAlD,EAA2E;YACnE0D,UAAQC,OAAOJ,UAAUK,OAAV,CAAkB,GAAlB,EAAuB,EAAvB,CAAP,IAAqC,GAAnD;oBACYJ,WAAWjD,MAAX,GAAoBmD,OAAhC;;iBAES,OAAON,QAAP,KAAoB,WAApB,GAAkCS,SAAlC,GAA8CF,OAAOP,QAAP,CAAzD;kBACY,OAAOC,SAAP,KAAqB,WAArB,GAAmCQ,SAAnC,GAA+CF,OAAON,SAAP,CAA3D;iBACW,OAAOC,QAAP,KAAoB,WAApB,GAAkCO,SAAlC,GAA8CF,OAAOL,QAAP,CAAzD;kBACY,OAAOC,SAAP,KAAqB,WAArB,GAAmCM,SAAnC,GAA+CF,OAAOJ,SAAP,CAA3D;;UAEMG,QAAQR,SAAS3C,MAAT,GAAkB2C,SAAS5C,KAAzC;UACIwD,WAAWZ,SAAS5C,KAAxB;UACIyD,YAAYb,SAAS3C,MAAzB;UACI,SAASyD,IAAT,CAAc5G,SAAd,CAAJ,EAA8B;mBACjB8F,SAAS5C,KAAT,IAAkBmC,UAAUS,SAASnE,CAArC,CAAX;YACIoE,eAAJ,EAAqBY,YAAYD,WAAWJ,KAAvB;;UAEnB,QAAQM,IAAR,CAAa5G,SAAb,CAAJ,EAA6B;mBAChB8F,SAAS5C,KAAT,IAAkBmC,UAAUS,SAASnE,CAArC,CAAX;YACIoE,eAAJ,EAAqBY,YAAYD,WAAWJ,KAAvB;;UAEnB,UAAUM,IAAV,CAAe5G,SAAf,CAAJ,EAA+B;oBACjB8F,SAAS3C,MAAT,IAAmBmC,UAAUQ,SAASlE,CAAtC,CAAZ;YACImE,eAAJ,EAAqBW,WAAWC,YAAYL,KAAvB;;UAEnB,OAAOM,IAAP,CAAY5G,SAAZ,CAAJ,EAA4B;oBACd8F,SAAS3C,MAAT,IAAmBmC,UAAUQ,SAASlE,CAAtC,CAAZ;YACImE,eAAJ,EAAqBW,WAAWC,YAAYL,KAAvB;;;UAGnBzE,SAAS,KAAKmB,KAAL,CAAWnB,MAAxB;UACI,UAAU+E,IAAV,CAAe5G,SAAf,CAAJ,EAA+B;;YAEvB6G,OAAO,KAAKjB,SAAL,CAAekB,qBAAf,EAAb;YACEC,WAAW,CAACF,KAAKlC,IAAL,GAAYkC,KAAKG,KAAlB,IAA2B,CADxC;YAEEC,WAAW,CAACJ,KAAKK,GAAL,GAAWL,KAAKM,MAAjB,IAA2B,CAFxC;YAGEC,UAAU9E,KAAK+E,KAAL,CAAWhC,UAAU0B,QAArB,EAA+BzB,UAAU2B,QAAzC,CAHZ;;gBAKQK,GAAR,CAAYT,IAAZ,EAAkBE,QAAlB;;iBAESzE,KAAKG,KAAL,CAAY2E,WAAW,MAAM9E,KAAKiF,EAAtB,IAA4B,CAAC,CAA9B,GAAmC,GAA9C,IAAqD,EAA9D;YACQ9C,SAVqB,GAUR,KAAK1E,KAVG,CAUrB0E,QAVqB;;YAWzB1D,SAAQ,IAAZ;YACI0D,SAAJ,EAAc;cACJ9C,EADI,GACK8C,SADL,CACJ9C,CADI;cACDC,EADC,GACK6C,SADL,CACD7C,CADC;;mBAEJF,mBAAmB,EAAEC,KAAF,EAAKC,KAAL,EAAQC,QAAQ,KAAKmB,KAAL,CAAWnB,MAA3B,EAAnB,CAAR;;;YAGEd,MAAJ,EAAW;iBACF4C,IAAP,CAAY5C,MAAZ,EAAmByG,GAAnB,CAAuB,UAAC1D,GAAD,EAAS;gBAC1B/C,UAAS+C,GAAT,IAAgB/C,OAAM+C,GAAN,CAApB,EAAgC;qBACzB8B,SAAL,CAAe7E,KAAf,CAAqB+C,GAArB,IAA4B/C,OAAM+C,GAAN,CAA5B;;WAFJ;;;;UAQA,KAAK/D,KAAL,CAAW0H,MAAX,KAAsB,QAA1B,EAAoC;YAC5B7C,SAAS,KAAKC,UAApB;YACID,kBAAkBE,WAAtB,EAAmC;cAC3B4C,aAAa9C,OAAOkC,qBAAP,EAAnB;cACMa,aAAaD,WAAW/C,IAA9B;cACMiD,YAAYF,WAAWR,GAA7B;;sCACsB,KAAKtB,SAAL,CAAekB,qBAAf,EAJW;cAIzBnC,KAJyB,yBAIzBA,IAJyB;cAInBuC,IAJmB,yBAInBA,GAJmB;;cAK3BW,aAAajD,OAAOT,WAAP,IAAsBwD,aAAahD,KAAnC,CAAnB;cACMmD,cAAclD,OAAOR,YAAP,IAAuBwD,YAAYV,IAAnC,CAApB;qBACWlB,YAAYA,WAAW6B,UAAvB,GAAoC7B,QAApC,GAA+C6B,UAA1D;sBACY5B,aAAaA,YAAY6B,WAAzB,GAAuC7B,SAAvC,GAAmD6B,WAA/D;;OAVJ,MAYO,IAAI,KAAK/H,KAAL,CAAW0H,MAAX,KAAsB,QAA1B,EAAoC;YACrC,OAAO5G,MAAP,KAAkB,WAAtB,EAAmC;uCACX,KAAK+E,SAAL,CAAekB,qBAAf,EADW;cACzBnC,MADyB,0BACzBA,IADyB;cACnBuC,KADmB,0BACnBA,GADmB;;cAE3BW,cAAahH,OAAOoD,UAAP,GAAoBU,MAAvC;cACMmD,eAAcjH,OAAOqD,WAAP,GAAqBgD,KAAzC;qBACWlB,YAAYA,WAAW6B,WAAvB,GAAoC7B,QAApC,GAA+C6B,WAA1D;sBACY5B,aAAaA,YAAY6B,YAAzB,GAAuC7B,SAAvC,GAAmD6B,YAA/D;;OANG,MAQA,IAAI,KAAK/H,KAAL,CAAW0H,MAAX,YAA6B3C,WAAjC,EAA8C;YAC7CiD,aAAa,KAAKhI,KAAL,CAAW0H,MAAX,CAAkBX,qBAAlB,EAAnB;YACMkB,aAAaD,WAAWpD,IAA9B;YACMsD,YAAYF,WAAWb,GAA7B;;qCACsB,KAAKtB,SAAL,CAAekB,qBAAf,EAJ6B;YAI3CnC,MAJ2C,0BAI3CA,IAJ2C;YAIrCuC,KAJqC,0BAIrCA,GAJqC;;YAK/C,EAAE,KAAKnH,KAAL,CAAW0H,MAAX,YAA6B3C,WAA/B,CAAJ,EAAiD;YAC3C+C,eAAa,KAAK9H,KAAL,CAAW0H,MAAX,CAAkBtD,WAAlB,IAAiC6D,aAAarD,MAA9C,CAAnB;YACMmD,gBAAc,KAAK/H,KAAL,CAAW0H,MAAX,CAAkBrD,YAAlB,IAAkC6D,YAAYf,KAA9C,CAApB;mBACWlB,YAAYA,WAAW6B,YAAvB,GAAoC7B,QAApC,GAA+C6B,YAA1D;oBACY5B,aAAaA,YAAY6B,aAAzB,GAAuC7B,SAAvC,GAAmD6B,aAA/D;;;UAGII,mBAAoB,OAAOhC,QAAP,KAAoB,WAApB,IAAmCA,WAAW,EAA/C,GAAqD,EAArD,GAA0DA,QAAnF;UACMiC,mBAAoB,OAAOnC,QAAP,KAAoB,WAApB,IAAmCA,WAAW,CAA/C,GAAoDU,QAApD,GAA+DV,QAAxF;UACMoC,oBAAqB,OAAOjC,SAAP,KAAqB,WAArB,IAAoCA,YAAY,EAAjD,GAAuD,EAAvD,GAA4DA,SAAtF;UACMkC,oBAAqB,OAAOpC,SAAP,KAAqB,WAArB,IAAoCA,YAAY,CAAjD,GAAsDU,SAAtD,GAAkEV,SAA5F;;UAEIF,eAAJ,EAAqB;YACbuC,iBAAiBJ,mBAAmBE,oBAAoB9B,KAAvC,GAA+C4B,gBAA/C,GAAkEE,oBAAoB9B,KAA7G;YACMiC,iBAAiBJ,mBAAmBE,oBAAoB/B,KAAvC,GAA+C6B,gBAA/C,GAAkEE,oBAAoB/B,KAA7G;YACMkC,kBAAkBJ,oBAAoBF,mBAAmB5B,KAAvC,GAA+C8B,iBAA/C,GAAmEF,mBAAmB5B,KAA9G;YACMmC,kBAAkBJ,oBAAoBF,mBAAmB7B,KAAvC,GAA+C+B,iBAA/C,GAAmEF,mBAAmB7B,KAA9G;mBACWpE,MAAMwE,QAAN,EAAgB4B,cAAhB,EAAgCC,cAAhC,CAAX;oBACYrG,MAAMyE,SAAN,EAAiB6B,eAAjB,EAAkCC,eAAlC,CAAZ;OANF,MAOO;mBACMvG,MAAMwE,QAAN,EAAgBwB,gBAAhB,EAAkCC,gBAAlC,CAAX;oBACYjG,MAAMyE,SAAN,EAAiByB,iBAAjB,EAAoCC,iBAApC,CAAZ;;UAEE,KAAKtI,KAAL,CAAW2I,IAAf,EAAqB;mBACRnG,KAAKmE,QAAL,EAAe,KAAK3G,KAAL,CAAW2I,IAAX,CAAgB,CAAhB,CAAf,CAAX;;UAEE,KAAK3I,KAAL,CAAW2I,IAAf,EAAqB;oBACPnG,KAAKoE,SAAL,EAAgB,KAAK5G,KAAL,CAAW2I,IAAX,CAAgB,CAAhB,CAAhB,CAAZ;;;UAGIC,QAAQ;eACLjC,WAAWZ,SAAS5C,KADf;gBAEJyD,YAAYb,SAAS3C,MAFjB;kBAGFuD,QAHE;mBAIDC,SAJC;;OAAd;;UAQIzD,SAAS,OAAOA,KAAP,KAAiB,QAA1B,IAAsCA,MAAMN,QAAN,CAAe,GAAf,CAA1C,EAA+D;YACvDgG,UAAWlC,WAAWN,WAAWlD,KAAvB,GAAgC,GAAhD;mBACc0F,OAAd;;;UAGEzF,UAAU,OAAOA,MAAP,KAAkB,QAA5B,IAAwCA,OAAOP,QAAP,CAAgB,GAAhB,CAA5C,EAAkE;YAC1DgG,WAAWjC,YAAYP,WAAWjD,MAAxB,GAAkC,GAAlD;oBACeyF,QAAf;;;WAGGvE,QAAL,CAAc;eACLnB,UAAU,MAAV,IAAoB,OAAO,KAAKnD,KAAL,CAAWmD,KAAlB,KAA4B,WAAhD,GAA8DwD,QAA9D,GAAyE,MADpE;gBAEJvD,WAAW,MAAX,IAAqB,OAAO,KAAKpD,KAAL,CAAWoD,MAAlB,KAA6B,WAAlD,GAAgEwD,SAAhE,GAA4E,MAFxE;;OAAd;;UAMI,KAAK5G,KAAL,CAAW8I,QAAf,EAAyB;aAClB9I,KAAL,CAAW8I,QAAX,CAAoBzD,KAApB,EAA2BpF,SAA3B,EAAsC,KAAK4F,SAA3C,EAAsD+C,KAAtD;;;;;8BAIMvD,OAAgC;oBACY,KAAKpC,KADjB;UAChC6C,UADgC,WAChCA,UADgC;UACpB7F,SADoB,WACpBA,SADoB;UACT8F,QADS,WACTA,QADS;UACCjE,MADD,WACCA,MADD;;UAEpC,CAACgE,UAAL,EAAiB;UACX8C,QAAQ;eACL,KAAKnG,IAAL,CAAUU,KAAV,GAAkB4C,SAAS5C,KADtB;gBAEJ,KAAKV,IAAL,CAAUW,MAAV,GAAmB2C,SAAS3C,MAFxB;kBAGF,KAAKX,IAAL,CAAUU,KAHR;mBAID,KAAKV,IAAL,CAAUW,MAJT;;OAAd;UAOI,KAAKpD,KAAL,CAAW+I,YAAf,EAA6B;aACtB/I,KAAL,CAAW+I,YAAX,CAAwB1D,KAAxB,EAA+BpF,SAA/B,EAA0C,KAAK4F,SAA/C,EAA0D+C,KAA1D;;UAEE,KAAK5I,KAAL,CAAWyC,IAAf,EAAqB;aACd6B,QAAL,CAAc,KAAKtE,KAAL,CAAWyC,IAAzB;;WAEG6B,QAAL,CAAc,EAAEwB,YAAY,KAAd,EAAd;;;;+BAsCSrD,MAAY;WAChB6B,QAAL,CAAc,EAAEnB,OAAOV,KAAKU,KAAd,EAAqBC,QAAQX,KAAKW,MAAlC,EAAd;;;;oCAG0B;;;oBAC8D,KAAKpD,KADnE;UAClBgJ,MADkB,WAClBA,MADkB;UACVC,YADU,WACVA,YADU;UACIC,aADJ,WACIA,aADJ;UACmBC,kBADnB,WACmBA,kBADnB;UACuCC,kBADvC,WACuCA,kBADvC;;UAEtB,CAACJ,MAAL,EAAa,OAAO,IAAP;UACPK,WAAW1F,OAAOC,IAAP,CAAYoF,MAAZ,EAAoBvB,GAApB,CAAwB,UAAC6B,GAAD,EAAgC;YACnEN,OAAOM,GAAP,MAAgB,KAApB,EAA2B;iBAEvBnJ,cAAC,OAAD;iBACOmJ,GADP;uBAEaA,GAFb;2BAGiB,OAAK5I,aAHtB;2BAIiBuI,gBAAgBA,aAAaK,GAAb,CAJjC;uBAKaJ,iBAAiBA,cAAcI,GAAd;YANhC;;eAUK,IAAP;OAZe,CAAjB;;;aAiBEnJ;;;qBACaiJ,kBADb;iBAESD;;;OAHX;;;;6BASmB;;;UACbI,aAAa,KAAKtG,KAAL,CAAW6C,UAAX,GAAwB7D,cAAxB,GAAyCC,cAA5D;;aAGE/B;;;eACO,aAACqJ,CAAD,EAAuC;mBAAO3D,SAAL,GAAiB2D,CAAjB;WADhD;;sBAGc;aACPD,UAFL,EAGK,KAAKvJ,KAAL,CAAWgB,KAHhB,EAIK,KAAKyI,SAJV;sBAKY,KAAKzJ,KAAL,CAAWiG,QALvB;uBAMa,KAAKjG,KAAL,CAAWkG,SANxB;sBAOY,KAAKlG,KAAL,CAAWmG,QAPvB;uBAQa,KAAKnG,KAAL,CAAWoG,SARxB;uBASa;YAXf;qBAaa,KAAKpG,KAAL,CAAWM;WAClB,KAAKoD,YAdX;aAgBQ1D,KAAL,CAAWE,QAhBd;aAiBQwJ,aAAL;OAlBL;;;;2BA3V4B;aACnB,KAAK7D,SAAN,CAAsBf,UAA9B;;;;2BAGqB;aACd,KAAK9E,KAAL,CAAWyC,IAAX,IAAmB,KAAKzC,KAAL,CAAW2J,WAArC;;;;2BAgRmB;aACZ,KAAK1G,KAAL,CAAWnB,MAAlB;;;;2BAEqB;UACjBqB,QAAQ,CAAZ;UACIC,SAAS,CAAb;UACI,OAAOtC,MAAP,KAAkB,WAAtB,EAAmC;gBACzB,KAAK+E,SAAL,CAAezB,WAAvB;iBACS,KAAKyB,SAAL,CAAexB,YAAxB;;aAEK,EAAElB,YAAF,EAASC,cAAT,EAAP;;;;2BAGiD;;;UACzCX,IADyC,GAChC,KAAKzC,KAD2B,CACzCyC,IADyC;;UAE3CmH,UAAU,SAAVA,OAAU,CAAC7F,GAAD,EAAqC;YAC/C,OAAO,OAAKd,KAAL,CAAWc,GAAX,CAAP,KAA2B,WAA3B,IAA0C,OAAKd,KAAL,CAAWc,GAAX,MAAoB,MAAlE,EAA0E,OAAO,MAAP;YACtE,OAAKb,SAAL,IAAkB,OAAKA,SAAL,CAAea,GAAf,CAAlB,IAAyC,OAAKb,SAAL,CAAea,GAAf,EAAoBnB,QAApB,GAA+BC,QAA/B,CAAwC,GAAxC,CAA7C,EAA2F;cACrF,OAAKI,KAAL,CAAWc,GAAX,EAAgBnB,QAAhB,GAA2BC,QAA3B,CAAoC,GAApC,CAAJ,EAA8C,OAAO,OAAKI,KAAL,CAAWc,GAAX,EAAgBnB,QAAhB,EAAP;cACxCyD,aAAa,OAAKC,aAAL,EAAnB;cACMuD,QAAQrD,OAAO,OAAKvD,KAAL,CAAWc,GAAX,EAAgBnB,QAAhB,GAA2B6D,OAA3B,CAAmC,IAAnC,EAAyC,EAAzC,CAAP,CAAd;cACMoC,UAAWgB,QAAQxD,WAAWtC,GAAX,CAAT,GAA4B,GAA5C;iBACU8E,OAAV;;eAEKlG,cAAc,OAAKM,KAAL,CAAWc,GAAX,CAAd,CAAP;OATF;UAWMZ,QAAUV,QAAQA,KAAKU,KAAd,IAAwB,CAAC,KAAKF,KAAL,CAAW6C,UAArC,GACVnD,cAAcF,KAAKU,KAAnB,CADU,GAEVyG,QAAQ,OAAR,CAFJ;UAGMxG,SAAWX,QAAQA,KAAKW,MAAd,IAAyB,CAAC,KAAKH,KAAL,CAAW6C,UAAtC,GACXnD,cAAcF,KAAKW,MAAnB,CADW,GAEXwG,QAAQ,QAAR,CAFJ;aAGO,EAAEzG,YAAF,EAASC,cAAT,EAAP;;;;EA1XmC0G;;AAAlB9G,UASZ+G,eAAe;iBACL,yBAAM,EADD;YAEV,oBAAM,EAFI;gBAGN,wBAAM,EAHA;UAIZ;SACD,IADC;WAEC,IAFD;YAGE,IAHF;UAIA,IAJA;cAKI,IALJ;iBAMO,IANP;gBAOM,IAPN;aAQG,IARH;eASK,IATL;iBAUO,IAVP;kBAWQ,IAXR;gBAYM,IAZN;YAaE;GAjBU;SAmBb,EAnBa;QAoBd,CAAC,CAAD,EAAI,CAAJ,CApBc;mBAqBH,KArBG;YAsBV,EAAEnI,GAAG,CAAL,EAAQC,GAAG,CAAX;;;;;"}